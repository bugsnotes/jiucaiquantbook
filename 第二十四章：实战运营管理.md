# ç¬¬äºŒåå››ç« ï¼šå®žæˆ˜è¿è¥ç®¡ç†

ðŸŽ¯ **é€‚åˆäººç¾¤**ï¼šå®žç›˜è¿è¥è€… | â±ï¸ **é˜…è¯»æ—¶é—´**ï¼š1å°æ—¶

## æœ¬ç« å¯¼è¯»

ç­–ç•¥ä¸Šçº¿åŽï¼Œæ—¥å¸¸è¿è¥ç®¡ç†è‡³å…³é‡è¦ã€‚æœ¬ç« ä»‹ç»å®žç›˜è¿è¥çš„æœ€ä½³å®žè·µã€‚

**æœ¬ç« å†…å®¹**ï¼š
- ðŸ“… 24.1 æ—¥å¸¸è¿ç»´
- ðŸ’¼ 24.2 ç­–ç•¥ç»„åˆç®¡ç†
- ðŸ“Š 24.3 ç»©æ•ˆè¯„ä¼°ä¸Žå½’å› 
- ðŸ”„ 24.4 ç­–ç•¥ä¼˜åŒ–ä¸Žè¿­ä»£

---

## 24.1 æ—¥å¸¸è¿ç»´

### â— 24.1.1 æ¯æ—¥è¿ç»´æµç¨‹

```python
"""
æ¯æ—¥è¿ç»´æ£€æŸ¥æ¸…å•
"""

class DailyOperations:
    def __init__(self):
        self.checklist = []

    def pre_market_check(self):
        """ç›˜å‰æ£€æŸ¥ï¼ˆ9:00-9:25ï¼‰"""
        checks = [
            "âœ“ æ£€æŸ¥ç³»ç»ŸçŠ¶æ€",
            "âœ“ æ£€æŸ¥æ•°æ®æ›´æ–°",
            "âœ“ æ£€æŸ¥ç½‘ç»œè¿žæŽ¥",
            "âœ“ æ£€æŸ¥è´¦æˆ·çŠ¶æ€",
            "âœ“ æ£€æŸ¥æŒä»“æƒ…å†µ",
            "âœ“ æ£€æŸ¥ä»Šæ—¥è°ƒä»“è®¡åˆ’",
            "âœ“ æ£€æŸ¥é£ŽæŽ§å‚æ•°",
        ]

        for check in checks:
            print(check)
            # æ‰§è¡Œå…·ä½“æ£€æŸ¥é€»è¾‘
            # ...

    def intraday_monitor(self):
        """ç›˜ä¸­ç›‘æŽ§ï¼ˆ9:30-15:00ï¼‰"""
        monitors = [
            "ç›‘æŽ§è®¢å•æ‰§è¡Œ",
            "ç›‘æŽ§æŒä»“ç›ˆäº",
            "ç›‘æŽ§ç³»ç»Ÿå¼‚å¸¸",
            "ç›‘æŽ§é£ŽæŽ§æŒ‡æ ‡",
        ]

        # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
        while self.is_trading_time():
            for monitor in monitors:
                self.check_metric(monitor)
            time.sleep(60)

    def post_market_review(self):
        """ç›˜åŽå¤ç›˜ï¼ˆ15:30-17:00ï¼‰"""
        reviews = [
            "ç»Ÿè®¡å½“æ—¥äº¤æ˜“",
            "è®¡ç®—å½“æ—¥æ”¶ç›Š",
            "åˆ†æžæ‰§è¡Œåå·®",
            "æ£€æŸ¥å¼‚å¸¸äº¤æ˜“",
            "æ›´æ–°æŒä»“è®°å½•",
            "å¤‡ä»½äº¤æ˜“æ•°æ®",
            "ç”Ÿæˆæ—¥æŠ¥å‘é€",
        ]

        for review in reviews:
            print(f"æ­£åœ¨{review}...")
            # æ‰§è¡Œå…·ä½“é€»è¾‘
            # ...

    def generate_daily_report(self):
        """ç”Ÿæˆæ¯æ—¥æŠ¥å‘Š"""
        report = f"""
        ========== äº¤æ˜“æ—¥æŠ¥ ==========
        æ—¥æœŸ: {datetime.now().date()}

        ðŸ“Š ä»Šæ—¥è¡¨çŽ°:
        - æ”¶ç›ŠçŽ‡: +0.85%
        - äº¤æ˜“æ¬¡æ•°: 12
        - æˆäº¤é‡‘é¢: Â¥125,000
        - å½“å‰æŒä»“: 15åª

        ðŸ“ˆ ç´¯è®¡è¡¨çŽ°:
        - ç´¯è®¡æ”¶ç›Š: +18.5%
        - æœ€å¤§å›žæ’¤: -8.2%
        - å¤æ™®æ¯”çŽ‡: 1.65

        âš ï¸ ä»Šæ—¥æé†’:
        - æ— å¼‚å¸¸

        ==============================
        """
        return report
```

---

## 24.2 ç­–ç•¥ç»„åˆç®¡ç†

### â— 24.2.1 å¤šç­–ç•¥é…ç½®

```python
class PortfolioManager:
    """ç­–ç•¥ç»„åˆç®¡ç†å™¨"""

    def __init__(self, total_capital):
        self.total_capital = total_capital
        self.strategies = {}

    def add_strategy(self, name, strategy, allocation):
        """æ·»åŠ ç­–ç•¥"""
        self.strategies[name] = {
            'strategy': strategy,
            'allocation': allocation,  # èµ„é‡‘åˆ†é…æ¯”ä¾‹
            'capital': total_capital * allocation,
            'performance': {}
        }

    def rebalance(self):
        """å†å¹³è¡¡"""
        # æ ¹æ®ç­–ç•¥è¡¨çŽ°è°ƒæ•´èµ„é‡‘åˆ†é…
        for name, info in self.strategies.items():
            sharpe = info['performance'].get('sharpe', 0)

            # å¤æ™®é«˜çš„ç­–ç•¥å¢žåŠ é…ç½®
            if sharpe > 1.5:
                info['allocation'] *= 1.1
            elif sharpe < 0.5:
                info['allocation'] *= 0.9

        # å½’ä¸€åŒ–
        total_alloc = sum(s['allocation'] for s in self.strategies.values())
        for info in self.strategies.values():
            info['allocation'] /= total_alloc
            info['capital'] = self.total_capital * info['allocation']

# ç¤ºä¾‹
pm = PortfolioManager(total_capital=1000000)

pm.add_strategy('trend_following', TrendStrategy(), allocation=0.4)
pm.add_strategy('mean_reversion', ReversionStrategy(), allocation=0.3)
pm.add_strategy('multi_factor', FactorStrategy(), allocation=0.3)

# æ¯æœˆå†å¹³è¡¡ä¸€æ¬¡
pm.rebalance()
```

---

## 24.3 ç»©æ•ˆè¯„ä¼°ä¸Žå½’å› 

### â— 24.3.1 ç»©æ•ˆåˆ†æž

```python
class PerformanceAnalyzer:
    """ç»©æ•ˆåˆ†æžå™¨"""

    def calculate_metrics(self, returns):
        """è®¡ç®—ç»©æ•ˆæŒ‡æ ‡"""
        metrics = {}

        # æ”¶ç›ŠæŒ‡æ ‡
        metrics['total_return'] = (1 + returns).prod() - 1
        metrics['annual_return'] = (1 + metrics['total_return']) ** (252/len(returns)) - 1

        # é£Žé™©æŒ‡æ ‡
        metrics['volatility'] = returns.std() * np.sqrt(252)
        metrics['sharpe'] = (metrics['annual_return'] - 0.03) / metrics['volatility']

        # å›žæ’¤
        cum_returns = (1 + returns).cumprod()
        running_max = cum_returns.cummax()
        drawdown = (cum_returns - running_max) / running_max
        metrics['max_drawdown'] = drawdown.min()

        return metrics

    def attribution_analysis(self, portfolio_return, factor_returns):
        """å½’å› åˆ†æž"""
        from sklearn.linear_model import LinearRegression

        # å›žå½’åˆ†æž
        model = LinearRegression()
        model.fit(factor_returns, portfolio_return)

        attribution = {}
        for i, factor_name in enumerate(factor_returns.columns):
            attribution[factor_name] = model.coef_[i]

        attribution['alpha'] = model.intercept_

        return attribution
```

---

## 24.4 ç­–ç•¥ä¼˜åŒ–ä¸Žè¿­ä»£

### â— 24.4.1 A/Bæµ‹è¯•

```python
class ABTesting:
    """ç­–ç•¥A/Bæµ‹è¯•"""

    def __init__(self, strategy_a, strategy_b, split_ratio=0.5):
        self.strategy_a = strategy_a
        self.strategy_b = strategy_b
        self.split_ratio = split_ratio

    def run_test(self, capital, duration_days=30):
        """è¿è¡Œæµ‹è¯•"""
        capital_a = capital * self.split_ratio
        capital_b = capital * (1 - self.split_ratio)

        results_a = self.strategy_a.run(capital_a, duration_days)
        results_b = self.strategy_b.run(capital_b, duration_days)

        # æ¯”è¾ƒç»“æžœ
        comparison = {
            'sharpe_a': results_a['sharpe'],
            'sharpe_b': results_b['sharpe'],
            'return_a': results_a['return'],
            'return_b': results_b['return'],
        }

        # ç»Ÿè®¡æ£€éªŒ
        from scipy import stats
        t_stat, p_value = stats.ttest_ind(
            results_a['daily_returns'],
            results_b['daily_returns']
        )

        if p_value < 0.05:
            print("ä¸¤ä¸ªç­–ç•¥çš„æ”¶ç›Šæœ‰æ˜¾è‘—å·®å¼‚")
        else:
            print("ä¸¤ä¸ªç­–ç•¥çš„æ”¶ç›Šæ— æ˜¾è‘—å·®å¼‚")

        return comparison
```

---

## æœ¬ç« å°ç»“

å®žæˆ˜è¿è¥çš„å…³é”®è¦ç‚¹ï¼š

### ðŸ“š æ ¸å¿ƒåŽŸåˆ™

1. **è§„èŒƒçš„è¿ç»´æµç¨‹**
   - ç›˜å‰æ£€æŸ¥
   - ç›˜ä¸­ç›‘æŽ§
   - ç›˜åŽå¤ç›˜

2. **ç§‘å­¦çš„ç»„åˆç®¡ç†**
   - å¤šç­–ç•¥åˆ†æ•£
   - åŠ¨æ€å†å¹³è¡¡
   - é£Žé™©æŽ§åˆ¶

3. **æŒç»­çš„ä¼˜åŒ–è¿­ä»£**
   - ç»©æ•ˆå½’å› 
   - A/Bæµ‹è¯•
   - å‚æ•°ä¼˜åŒ–

---

*æœ¬ç« å®Œ*
